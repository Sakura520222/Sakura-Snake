# 🐍 Sakura Snake - 小樱贪吃蛇1

一个功能丰富的现代化贪吃蛇游戏，支持网页版和桌面版，具有AI辅助、多模式、响应式设计等特色功能。

[![在线演示](https://img.shields.io/badge/在线演示-点击体验-blue)](https://tcs.firefly520.top)
[![版本](https://img.shields.io/badge/版本-1.0-green)](https://github.com/Sakura520222/Sakura-Snake)
[![许可证](https://img.shields.io/badge/许可证-MIT-orange)](LICENSE)

## ✨ 项目特色

### 🎮 游戏功能
- **智能AI系统**：A*路径规划算法，支持穿墙模式优化
- **多难度模式**：4种难度级别，包括疯狂挑战模式
- **双游戏模式**：正常模式 + 穿墙模式
- **实时计时**：游戏时间统计和显示
- **紧急寻食**：智能饥饿检测机制

### 📱 用户体验
- **响应式设计**：桌面端和移动端完美适配
- **触摸优化**：移动端控制按钮快速响应
- **现代化UI**：毛玻璃效果 + 渐变背景
- **一键打包**：网页游戏转独立桌面应用

### 🔧 技术亮点
- **性能优化**：优先队列优化的A*算法
- **内存管理**：智能危险位置清理机制
- **边界检测**：完善的穿墙模式边界处理
- **代码质量**：模块化设计，注释完整

## 🚀 快速开始

### 网页版运行
```bash
# 直接打开index.html文件
double-click index.html
```

### 桌面版打包
```bash
# 方法一：一键打包（推荐）
double-click "一键打包.bat"

# 方法二：Python脚本
python auto_pack.py

# 打包完成后，在dist文件夹中找到Sakura-tcs-game.exe
```

## 📁 项目结构

```
Sakura-Snake/
├── 📄 index.html              # 游戏主页面
├── 📄 game.js                 # 核心游戏逻辑（AI、碰撞检测等）
├── 📄 styles.css              # 响应式样式设计
├── 🐍 main.py                 # Python桌面应用入口
├── 🔧 auto_pack.py            # 一键打包脚本
├── 🎯 一键打包.bat             # Windows批处理打包脚本
├── 🎨 create_icon.py          # 图标生成脚本
├── 📊 requirements.txt        # Python依赖列表
├── 📖 README.md               # 项目说明文档
├── 📋 打包说明.txt            # 详细打包指南
├── 🎮 游戏说明.txt            # 游戏玩法说明
├── 📦 dist/                   # 打包输出目录
│   └── 🎯 Sakura-tcs-game.exe # 最终可执行文件
└── 🔨 build/                  # 临时构建目录（可删除）
```

## 🎯 游戏功能详解

### 核心玩法
- **经典贪吃蛇**：收集食物，避免碰撞，不断成长
- **智能AI**：自动寻路，智能决策，支持紧急状态处理
- **多食物系统**：根据难度动态调整食物数量

### 难度级别
1. **简单模式**：适合新手玩家
2. **中等模式**：平衡的挑战性
3. **困难模式**：高难度挑战
4. **疯狂模式**：极限速度体验

### 游戏模式
- **正常模式**：传统规则，撞墙即死
- **穿墙模式**：可以穿越边界，从对面出现

### 控制方式
- **桌面端**：键盘方向键控制
- **移动端**：触摸按钮控制
- **通用操作**：空格键暂停/继续

## 🛠️ 技术实现

### 前端技术栈
- **游戏引擎**: 原生JavaScript + Canvas API
- **UI框架**: 纯CSS3 + HTML5
- **布局技术**: Flexbox + 响应式媒体查询
- **事件处理**: 键盘事件 + 触摸事件

### AI算法实现
- **路径规划**: 优先队列优化的A*算法
- **智能决策**: 基于蛇长度、饥饿状态和目标位置的权重计算
- **边界检测**: 双重取模运算处理穿墙模式边界
- **危险位置管理**: 基于时间戳的智能清理机制

### 性能优化
- **算法优化**: 优先队列替代Set提升A*算法效率
- **内存管理**: 30秒过期清理危险位置记录
- **响应优化**: 触摸事件防抖和立即重绘

## 📋 安装说明

### 系统要求
- **操作系统**: Windows 7+ / macOS / Linux
- **浏览器**: Chrome 60+ / Firefox 55+ / Safari 12+ / Edge 79+
- **Python**: 3.6+（仅打包需要）

### 网页版安装
1. 下载项目文件
2. 双击 `index.html` 文件
3. 或部署到Web服务器

### 桌面版安装
1. 运行一键打包脚本
2. 在 `dist` 文件夹找到可执行文件
3. 双击运行游戏

## 🎮 游戏操作指南

### 基本控制
- **方向控制**: ↑↓←→ 方向键或触摸按钮
- **暂停/继续**: 空格键
- **AI开关**: 点击AI按钮

### 游戏设置
- **难度选择**: 简单/中等/困难/疯狂
- **游戏模式**: 正常/穿墙
- **速度调节**: 50-300ms移动间隔

### 移动端操作
- 点击屏幕下方方向按钮
- 支持触摸滑动操作
- 自动适配屏幕尺寸

## 🔧 开发指南

### 项目结构解析
```
game.js 主要模块：
├── 游戏初始化 (initGame, resetGame)
├── 核心逻辑 (gameLoop, updateGame)
├── AI系统 (aiMakeDecision, aStarPath)
├── 碰撞检测 (checkCollision, isSafe)
├── UI控制 (createControls, handleControl)
└── 工具函数 (getWrappedDistance, trimDangerousPositions)
```

### 自定义开发
- 修改 `game.js` 中的游戏参数
- 调整 `styles.css` 中的UI样式
- 扩展AI算法逻辑
- 添加新的游戏模式

### 调试技巧
- 使用浏览器开发者工具
- 查看控制台日志输出
- 修改游戏参数实时测试

## 📦 一键打包功能

### 打包优势
- **完全独立**: 单个EXE文件，无需安装依赖
- **资源内嵌**: HTML/CSS/JS文件已内嵌到可执行文件中
- **专业外观**: 自定义贪吃蛇主题图标和窗口标题
- **跨平台兼容**: 可在任何Windows系统运行

### 打包方法

#### 方法一：批处理脚本（推荐）
```bash
双击运行 "一键打包.bat"
```

#### 方法二：Python脚本
```bash
python auto_pack.py
```

#### 方法三：手动打包（高级用户）
```bash
# 1. 安装依赖
pip install -r requirements.txt

# 2. 生成图标（可选）
python create_icon.py

# 3. 打包为EXE
python -m PyInstaller --onefile --windowed --name "Sakura-tcs-game" --icon "game_icon.ico" --add-data "index.html;." --add-data "styles.css;." --add-data "game.js;." main.py
```

### 打包输出
- **输出文件**: `dist/Sakura-tcs-game.exe` (约13MB)
- **图标文件**: `game_icon.ico` (自动生成)
- **临时文件**: `build/` 目录 (可删除)

## ❓ 常见问题

### 打包问题
**Q: 打包失败怎么办？**
A: 检查Python版本(3.6+)、网络连接、磁盘空间

**Q: EXE文件被杀毒软件误报？**
A: 这是正常现象，请添加信任或关闭实时保护

### 游戏问题
**Q: 游戏卡顿怎么办？**
A: 降低游戏速度或关闭AI功能

**Q: 移动端控制不灵敏？**
A: 确保使用现代浏览器，避免页面缩放

### 技术问题
**Q: 如何修改游戏参数？**
A: 编辑 `game.js` 文件中的相关常量

**Q: 如何添加新功能？**
A: 参考开发指南，扩展相应模块

## 🤝 贡献指南

### 报告问题
- 使用GitHub Issues报告bug
- 提供详细的重现步骤
- 包含操作系统和浏览器信息

### 功能建议
- 描述新功能的用途和实现思路
- 考虑与现有功能的兼容性
- 提供UI/UX设计建议

### 代码贡献
- 遵循现有代码风格
- 添加必要的注释和文档
- 测试所有功能正常运行

## 📄 许可证

本项目采用 MIT 许可证 - 查看 [LICENSE](LICENSE) 文件了解详情。

## 🙏 致谢

感谢所有贡献者和测试者的支持！

---

**享受您的贪吃蛇游戏体验！** 🎮✨

如有问题或建议，欢迎提交Issue或联系开发者。
